<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘¼å¸ã‚¬ã‚¤ãƒ‰ - Breathing Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes breathe {
            0% {
                transform: scale(1);
            }
            33.33% {
                transform: scale(1.8);
            }
            66.66% {
                transform: scale(1.8);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .breathing-circle {
            animation: breathe 15s ease-in-out infinite;
            transition: all 0.3s ease;
        }
        
        /* ã‚«ã‚¹ã‚¿ãƒ ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="h-screen overflow-hidden gradient-bg flex items-center justify-center">
    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ -->
    <div class="relative w-full h-full flex flex-col items-center justify-center p-4">
        <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
        <div class="absolute top-8 text-white text-center">
            <h1 class="text-2xl md:text-3xl font-light mb-2">ğŸ§˜â€â™€ï¸ å‘¼å¸ã‚¬ã‚¤ãƒ‰</h1>
            <p class="text-sm md:text-base opacity-75">ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ã¦æ·±å‘¼å¸ã—ã¾ã—ã‚‡ã†</p>
        </div>
        
        <!-- å‘¼å¸ã‚µãƒ¼ã‚¯ãƒ« -->
        <div class="relative">
            <!-- å¤–å´ã®è£…é£¾çš„ãªå†† -->
            <div class="absolute inset-0 w-48 h-48 md:w-64 md:h-64 bg-white/10 rounded-full blur-xl"></div>
            
            <!-- ãƒ¡ã‚¤ãƒ³ã®å‘¼å¸å†† -->
            <div class="breathing-circle relative w-48 h-48 md:w-64 md:h-64 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center border-2 border-white/30 shadow-2xl">
                <!-- ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
                <div class="text-center">
                    <p id="breathText" class="text-2xl md:text-3xl text-white font-light mb-2">å¸ã£ã¦...</p>
                    <p id="breathIcon" class="text-4xl md:text-5xl">ğŸŒ¿</p>
                </div>
            </div>
        </div>
        
        <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ -->
        <div class="absolute bottom-8 flex gap-4">
            <button id="pauseBtn" class="px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-full backdrop-blur-md transition-all duration-300 flex items-center gap-2">
                <span id="pauseIcon">â¸</span>
                <span id="pauseText">ä¸€æ™‚åœæ­¢</span>
            </button>
            
            <button id="soundBtn" class="px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-full backdrop-blur-md transition-all duration-300 flex items-center gap-2">
                <span>ğŸ”‡</span>
                <span>ç’°å¢ƒéŸ³</span>
            </button>
        </div>
        
        <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
        <div class="absolute bottom-20 w-full max-w-md px-8">
            <div class="h-2 bg-white/20 rounded-full overflow-hidden">
                <div id="progressBar" class="h-full bg-white/60 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
        </div>
        
        <!-- ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="absolute top-1/2 left-8 transform -translate-y-1/2 text-white/50 text-sm hidden md:block">
            <p>5ç§’ å¸ã†</p>
            <p>5ç§’ æ­¢ã‚ã‚‹</p>
            <p>5ç§’ åã</p>
        </div>
    </div>
    
    <!-- ç’°å¢ƒéŸ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ -->
    <audio id="ambientSound" loop>
        <!-- å®Ÿéš›ã®éŸ³æºã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯srcã‚’è¿½åŠ  -->
        <!-- <source src="ambient-sound.mp3" type="audio/mpeg"> -->
    </audio>
    
    <script>
        // å‘¼å¸ã‚¬ã‚¤ãƒ‰ã®ãƒ­ã‚¸ãƒƒã‚¯
        const breathText = document.getElementById('breathText');
        const breathIcon = document.getElementById('breathIcon');
        const progressBar = document.getElementById('progressBar');
        const pauseBtn = document.getElementById('pauseBtn');
        const pauseIcon = document.getElementById('pauseIcon');
        const pauseText = document.getElementById('pauseText');
        const soundBtn = document.getElementById('soundBtn');
        const ambientSound = document.getElementById('ambientSound');
        
        // å‘¼å¸ãƒ•ã‚§ãƒ¼ã‚ºã®å®šç¾©
        const phases = [
            { text: 'å¸ã£ã¦...', icon: 'ğŸŒ¿', duration: 5000 },
            { text: 'æ­¢ã‚ã¦...', icon: 'ğŸ§˜â€â™€ï¸', duration: 5000 },
            { text: 'åã„ã¦...', icon: 'ğŸŒŠ', duration: 5000 }
        ];
        
        let currentPhase = 0;
        let isPaused = false;
        let phaseStartTime = Date.now();
        let pausedTime = 0;
        let animationFrame;
        
        // ãƒ•ã‚§ãƒ¼ã‚ºã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        function updatePhase() {
            const phase = phases[currentPhase];
            breathText.textContent = phase.text;
            breathIcon.textContent = phase.icon;
            
            // ãƒ•ã‚§ãƒ¼ã‚ºã”ã¨ã«å¾®å¦™ã«èƒŒæ™¯è‰²ã‚’å¤‰æ›´
            document.body.className = document.body.className.replace(/gradient-bg-\d/, '') + 
                                     ` gradient-bg-${currentPhase}`;
        }
        
        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        function updateProgress() {
            if (isPaused) return;
            
            const currentTime = Date.now();
            const elapsedTime = currentTime - phaseStartTime - pausedTime;
            const phase = phases[currentPhase];
            const progress = Math.min((elapsedTime / phase.duration) * 100, 100);
            
            progressBar.style.width = `${progress}%`;
            
            // ãƒ•ã‚§ãƒ¼ã‚ºãŒå®Œäº†ã—ãŸã‚‰æ¬¡ã¸
            if (elapsedTime >= phase.duration) {
                currentPhase = (currentPhase + 1) % phases.length;
                phaseStartTime = Date.now();
                pausedTime = 0;
                updatePhase();
            }
            
            animationFrame = requestAnimationFrame(updateProgress);
        }
        
        // ä¸€æ™‚åœæ­¢/å†é–‹ã®å‡¦ç†
        pauseBtn.addEventListener('click', () => {
            isPaused = !isPaused;
            
            if (isPaused) {
                pauseIcon.textContent = 'â–¶';
                pauseText.textContent = 'å†é–‹';
                document.querySelector('.breathing-circle').style.animationPlayState = 'paused';
                cancelAnimationFrame(animationFrame);
                pausedTime += Date.now() - phaseStartTime;
            } else {
                pauseIcon.textContent = 'â¸';
                pauseText.textContent = 'ä¸€æ™‚åœæ­¢';
                document.querySelector('.breathing-circle').style.animationPlayState = 'running';
                phaseStartTime = Date.now();
                updateProgress();
            }
        });
        
        // ç’°å¢ƒéŸ³ã®åˆ‡ã‚Šæ›¿ãˆï¼ˆå®Ÿè£…ä¾‹ï¼‰
        let isSoundOn = false;
        soundBtn.addEventListener('click', () => {
            isSoundOn = !isSoundOn;
            soundBtn.querySelector('span:first-child').textContent = isSoundOn ? 'ğŸ”Š' : 'ğŸ”‡';
            
            // å®Ÿéš›ã®éŸ³æºãŒã‚ã‚‹å ´åˆ
            if (ambientSound.src) {
                if (isSoundOn) {
                    ambientSound.play().catch(e => console.log('éŸ³å£°å†ç”Ÿã‚¨ãƒ©ãƒ¼:', e));
                } else {
                    ambientSound.pause();
                }
            }
        });
        
        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                pauseBtn.click();
            }
        });
        
        // ã‚¢ãƒ—ãƒªã®åˆæœŸåŒ–
        function init() {
            updatePhase();
            updateProgress();
        }
        
        // é–‹å§‹
        init();
        
        // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆTailwindã§ç›´æ¥å®šç¾©ã§ããªã„å ´åˆï¼‰
        const style = document.createElement('style');
        style.textContent = `
            .gradient-bg-0 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            .gradient-bg-1 { background: linear-gradient(135deg, #6B73FF 0%, #000DFF 100%); }
            .gradient-bg-2 { background: linear-gradient(135deg, #8E2DE2 0%, #4A00E0 100%); }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>